theme_minimal()
p
employWide = arrange(employWide , desc(salary_diff))
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female))) +
geom_point(aes(x=2 , y = log(Male))) +
scale_colour_gradient(low = "red" , high = "blue") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female))) +
geom_point(aes(x=2 , y = log(Male))) +
scale_colour_gradient(low = "red" , high = "green") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female))) +
geom_point(aes(x=2 , y = log(Male))) +
scale_colour_gradient(low = "red" , high = "purple") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female))) +
geom_point(aes(x=2 , y = log(Male))) +
scale_colour_gradient(low = "red" , high = "yellow") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient(low = "red" , high = "yellow") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient(rainbow(100)) +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradientn(rainbow(100)) +
theme_minimal()
p
?scale_colour_gradient2
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2() +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "purple" , mid = "grey" , high = "red") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "green" , mid = "grey" , high = "red") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue" , mid = "grey" , high = "red") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue" , mid = "grey" , high = "green") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue" , mid = "lightgrey" , high = "green") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = rgb(0,0,1,.5) ,
mid = rgb(0,0,0,.5) ,
high = rgb(0,1,0,.5)) +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = rgb(0,0,1,.5) ,
mid = rgb(0,0,0,.5) ,
high = rgb(0,1,0,.5)) +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = alpha("red",0.5) ,
mid = rgb(0,0,0,.5) ,
high = rgb(0,1,0,.5)) +
theme_minimal()
p
high = alpha("blue",0.5) +
p
p <- ggplot(employWide) +
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = alpha("red",0.5) ,
mid = alpha("black",0.5) ,
high = alpha("blue",0.5)) +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = alpha("red",0.5) ,
mid = alpha("black",0.5) ,
high = alpha("blue",0.5)) +
theme_minimal()
p
high = "blue" +
p
p <- ggplot(employWide) +
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "red",
mid = "grey" ,
high = "blue") +
theme_minimal()
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "red",
mid = "grey" ,
high = "blue") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
#geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
#geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal()
p
employWide = filter(employWide , !is.na(salary_diff))
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal()
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(aes(x = 1 , y = Female ,
label = occupation[salary_diff < (-1000)]))
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(aes(x = 1 , y = Female[salary_diff < (-1000)] ,
label = occupation[salary_diff < (-1000)]))
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(data=subset(employWide, salary_diff < (-1000)),
aes(x = 1, y = Female , label = occupation))
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(data=subset(employWide, salary_diff < (-1000)),
aes(x = 1, y = log(Female) , label = occupation))
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(data=subset(employWide, salary_diff < (-10000)),
aes(x = 1, y = log(Female) , label = occupation))
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(data=subset(employWide, salary_diff < (-10000)),
aes(x = 1, y = log(Female) , label = occupation)) +
geom_text(data=subset(employWide, salary_diff > (10000)),
aes(x = 1, y = log(Male) , label = occupation))
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(data=subset(employWide, salary_diff < (-10000)),
aes(x = 1, y = log(Female) , label = occupation)) +
geom_text(data=subset(employWide, salary_diff > (10000)),
aes(x = 2, y = log(Male) , label = occupation))
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(data=subset(employWide, salary_diff < (-50000)),
aes(x = 1, y = log(Female) , label = occupation)) +
geom_text(data=subset(employWide, salary_diff > (50000)),
aes(x = 2, y = log(Male) , label = occupation))
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log(Female) , yend = log(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(data=subset(employWide, Female > 2*Male),
aes(x = 1, y = log(Female) , label = occupation)) +
geom_text(data=subset(employWide, Male > 2*Female),
aes(x = 2, y = log(Male) , label = occupation))
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log10(Female) , yend = log10(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log10(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log10(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(data=subset(employWide, Female > 2*Male),
aes(x = 1, y = log10(Female) , label = occupation)) +
geom_text(data=subset(employWide, Male > 2*Female),
aes(x = 2, y = log10(Male) , label = occupation))
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log10(Female) , yend = log10(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log10(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log10(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(data=subset(employWide, Female > 2*Male),
aes(x = 1, y = log10(Female) , label = occupation),
hjust = 0) +
geom_text(data=subset(employWide, Male > 2*Female),
aes(x = 2, y = log10(Male) , label = occupation))
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log10(Female) , yend = log10(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log10(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log10(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(data=subset(employWide, Female > 2*Male),
aes(x = 1, y = log10(Female) , label = occupation),
hjust = 0) +
geom_text(data=subset(employWide, Male > 2*Female),
aes(x = 2, y = log10(Male) , label = occupation),
hjust = 1)
p
p <- ggplot(employWide) +
geom_segment(aes(x = 1 , xend = 2,
y = log10(Female) , yend = log10(Male),
color = salary_diff)) +
geom_point(aes(x=1 , y = log10(Female) , color = salary_diff)) +
geom_point(aes(x=2 , y = log10(Male) , color = salary_diff)) +
scale_colour_gradient2(low = "blue",
mid = "grey" ,
high = "red") +
theme_minimal() +
geom_text(data=subset(employWide, Female > 2*Male),
aes(x = 1, y = log10(Female) , label = occupation),
hjust = 0) +
geom_text(data=subset(employWide, Male > 2*Female),
aes(x = 2, y = log10(Male) , label = occupation),
hjust = 1) +
ylab("Log average taxable income") + xlab("Gender")
p
?Axis
?axisTicks
library(ggplot2)
library(dplyr)
library(tidyr)
dats <- read.csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/week4_australian_salary.csv")
names(dats)
head(dats)
employ <- arrange(dats , desc(average_taxable_income))
employ <- mutate(employ,
rank_new = ifelse(gender == "Female" , gender_rank + 0.4 , gender_rank))
employH <- filter(employ , gender_rank <= 10)
employL <- filter(employ , gender_rank >= (max(gender_rank)-20))
employWide = select(employ[employ$individuals>1000,]
, gender , occupation , average_taxable_income)
employWide = spread(employWide , gender , average_taxable_income)
employWide = mutate(employWide ,
mean_salary = (Male+Female)/2,
salary_diff = Male - Female,
salary_gain = (Male-Female)/Male)
employWide = filter(employWide , !is.na(salary_diff))
employWide = arrange(employWide , desc(salary_diff))
p <- ggplot(employWide , aes(x = (mean_salary) , y = log10(abs(salary_gain*100)) * sign(salary_gain))) +
theme_classic()+
theme(legend.position = c(.99,.01) , legend.justification = c("right","bottom"),
legend.background = element_rect(linetype = 2 , colour = 1)) +
geom_point(aes(color = abs(salary_diff))) +
scale_colour_gradient2(low = "blue",mid = "grey",high = "red" ,name="Absolute diff. \nin income") +
geom_line(aes(y = 0)) +
scale_y_continuous(name = "Males make _% of female income" , breaks = c(-1.48,-1,0,1,1.48) , labels = c(70,90,100,110,130)) +
# scale_x_continuous(name = "Average income" , breaks = c(4.18,4.477,4.7,5,5.255) ,
#                    labels = paste(round(10^ c(4.18,4.477,4.7,5,5.255)/1000),"K"))
scale_x_continuous(name = "Average income" , breaks = c(50,100,150,200)*1000 , labels = paste(c(50,100,150,200),"K"))
p
setwd("~/Documents/tidy_tuesday")
pdf("tidytuesday_0424.pdf")
p
dev.off()
library(ggplot2)
library(dplyr)
library(tidyr)
dats <- read.csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/week4_australian_salary.csv")
names(dats)
head(dats)
employ <- arrange(dats , desc(average_taxable_income))
employ <- mutate(employ,
rank_new = ifelse(gender == "Female" , gender_rank + 0.4 , gender_rank))
employH <- filter(employ , gender_rank <= 10)
employL <- filter(employ , gender_rank >= (max(gender_rank)-20))
employWide = select(employ[employ$individuals>1000,]
, gender , occupation , average_taxable_income)
employWide = spread(employWide , gender , average_taxable_income)
employWide = mutate(employWide ,
mean_salary = (Male+Female)/2,
salary_diff = Male - Female,
salary_gain = (Male-Female)/Male)
employWide = filter(employWide , !is.na(salary_diff))
employWide = arrange(employWide , desc(salary_diff))
p <- ggplot(employWide , aes(x = (mean_salary) , y = log10(abs(salary_gain*100)) * sign(salary_gain))) +
theme_classic()+
theme(legend.position = c(.99,.01) , legend.justification = c("right","bottom"),
legend.background = element_rect(linetype = 2 , colour = 1)) +
geom_point(aes(color = abs(salary_diff))) +
scale_colour_gradient2(low = "blue",mid = "grey",high = "red" ,name="Absolute diff. \nin income") +
geom_line(aes(y = 0)) +
scale_y_continuous(name = "Males make _% of female income" , breaks = c(-1.48,-1,0,1,1.48) , labels = c(70,90,100,110,130)) +
# scale_x_continuous(name = "Average income" , breaks = c(4.18,4.477,4.7,5,5.255) ,
#                    labels = paste(round(10^ c(4.18,4.477,4.7,5,5.255)/1000),"K"))
scale_x_continuous(name = "Average income" , breaks = c(50,100,150,200)*1000 , labels = paste(c(50,100,150,200),"K"))
p
pdf("tidytuesday_0424.pdf",6,7)
p
dev.off()
